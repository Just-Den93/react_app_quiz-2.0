{"ast":null,"code":"import React,{useMemo,useState}from'react';import ContentContainer from'../ContentContainer/ContentContainer';import EndMessage from'../EndMessage/EndMessage';import MenuModal from'../MenuModal/MenuModal';import Modal from'../Modal/Modal';import Settings from'../Settings/Settings';import ConfettiAnimation from'../Animation/ConfettiAnimation';import styles from'./QuizPage.module.css';import{useQuizContext}from'../../context/QuizContext';import PCImage from'../../images/PC_horizontal_1line_black.svg';import{getTotalBlocks,getUsedBlocksCount,handleBlockSelect,handleCloseModal,handleNewGame,handleMainMenu,handleSelectCategory}from'./quizPageUtils';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function QuizPage(){const{quizStates,setShowQuizPage,currentQuizId,selectedMode,data,markBlockAsUsed,setQuizStates}=useQuizContext();const currentQuizState=useMemo(()=>quizStates[currentQuizId]||{},[quizStates,currentQuizId]);const[isSettingsVisible,setIsSettingsVisible]=useState(false);const[selectedBlock,setSelectedBlock]=useState(null);const[selectedCategory,setSelectedCategory]=useState(null);const[confettiRunning,setConfettiRunning]=useState(false);const[showEndMessage,setShowEndMessage]=useState(false);const[isMenuVisible,setIsMenuVisible]=useState(false);const[isBlockUsed,setIsBlockUsed]=useState(false);const totalBlocks=useMemo(()=>getTotalBlocks(data),[data]);const usedBlocksCount=useMemo(()=>getUsedBlocksCount(currentQuizState),[currentQuizState]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.quiz_page,children:[/*#__PURE__*/_jsx(ConfettiAnimation,{isRunning:confettiRunning}),data?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:PCImage,alt:\"PC horizontal line\",className:styles.image}),/*#__PURE__*/_jsx(ContentContainer,{data:data,onBlockSelect:(block,category)=>handleBlockSelect(block,category,currentQuizState,setSelectedBlock,setSelectedCategory,setIsBlockUsed),usedBlocks:currentQuizState.usedBlocks||{}}),selectedBlock&&/*#__PURE__*/_jsx(Modal,{block:selectedBlock,categoryName:(selectedCategory===null||selectedCategory===void 0?void 0:selectedCategory.name)||'Без категории',onClose:()=>handleCloseModal(setSelectedBlock,setSelectedCategory,setIsBlockUsed),selectedMode:selectedMode,onSelectCategory:(categoryId,blockId)=>handleSelectCategory(categoryId,blockId,currentQuizId,markBlockAsUsed,totalBlocks,usedBlocksCount,setConfettiRunning,setShowEndMessage,()=>handleCloseModal(setSelectedBlock,setSelectedCategory,setIsBlockUsed)),isBlockUsed:isBlockUsed,onTryAgain:()=>setIsBlockUsed(false),onContinue:()=>handleCloseModal(setSelectedBlock,setSelectedCategory,setIsBlockUsed)})]}):/*#__PURE__*/_jsx(\"div\",{children:\"No data available.\"}),showEndMessage&&/*#__PURE__*/_jsx(EndMessage,{onNewGame:()=>handleNewGame(currentQuizId,setQuizStates,setConfettiRunning,setShowEndMessage),onMainMenu:()=>handleMainMenu(currentQuizId,setQuizStates,setShowQuizPage,setConfettiRunning,true)}),/*#__PURE__*/_jsx(MenuModal,{showSettings:()=>setIsSettingsVisible(true),showMainMenu:()=>handleMainMenu(currentQuizId,setQuizStates,setShowQuizPage,setConfettiRunning,false),onNewGame:()=>handleNewGame(currentQuizId,setQuizStates,setConfettiRunning,setShowEndMessage),isVisible:isMenuVisible,closeMenuModal:()=>setIsMenuVisible(false)}),isSettingsVisible&&/*#__PURE__*/_jsx(Settings,{onClose:()=>setIsSettingsVisible(false)})]});}export default QuizPage;","map":{"version":3,"names":["React","useMemo","useState","ContentContainer","EndMessage","MenuModal","Modal","Settings","ConfettiAnimation","styles","useQuizContext","PCImage","getTotalBlocks","getUsedBlocksCount","handleBlockSelect","handleCloseModal","handleNewGame","handleMainMenu","handleSelectCategory","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","QuizPage","quizStates","setShowQuizPage","currentQuizId","selectedMode","data","markBlockAsUsed","setQuizStates","currentQuizState","isSettingsVisible","setIsSettingsVisible","selectedBlock","setSelectedBlock","selectedCategory","setSelectedCategory","confettiRunning","setConfettiRunning","showEndMessage","setShowEndMessage","isMenuVisible","setIsMenuVisible","isBlockUsed","setIsBlockUsed","totalBlocks","usedBlocksCount","className","quiz_page","children","isRunning","src","alt","image","onBlockSelect","block","category","usedBlocks","categoryName","name","onClose","onSelectCategory","categoryId","blockId","onTryAgain","onContinue","onNewGame","onMainMenu","showSettings","showMainMenu","isVisible","closeMenuModal"],"sources":["E:/quiz-app-react/src/components/QuizPage/QuizPage.jsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\r\nimport ContentContainer from '../ContentContainer/ContentContainer';\r\nimport EndMessage from '../EndMessage/EndMessage';\r\nimport MenuModal from '../MenuModal/MenuModal';\r\nimport Modal from '../Modal/Modal';\r\nimport Settings from '../Settings/Settings';\r\nimport ConfettiAnimation from '../Animation/ConfettiAnimation';\r\nimport styles from './QuizPage.module.css';\r\nimport { useQuizContext } from '../../context/QuizContext';\r\nimport PCImage from '../../images/PC_horizontal_1line_black.svg';\r\nimport {\r\n  getTotalBlocks,\r\n  getUsedBlocksCount,\r\n  handleBlockSelect,\r\n  handleCloseModal,\r\n  handleNewGame,\r\n  handleMainMenu,\r\n  handleSelectCategory\r\n} from './quizPageUtils';\r\nfunction QuizPage() {\r\n  const { quizStates, setShowQuizPage, currentQuizId, selectedMode, data, markBlockAsUsed, setQuizStates } = useQuizContext();\r\n  const currentQuizState = useMemo(() => quizStates[currentQuizId] || {}, [quizStates, currentQuizId]);\r\n  const [isSettingsVisible, setIsSettingsVisible] = useState(false);\r\n  const [selectedBlock, setSelectedBlock] = useState(null);\r\n  const [selectedCategory, setSelectedCategory] = useState(null);\r\n  const [confettiRunning, setConfettiRunning] = useState(false);\r\n  const [showEndMessage, setShowEndMessage] = useState(false);\r\n  const [isMenuVisible, setIsMenuVisible] = useState(false);\r\n  const [isBlockUsed, setIsBlockUsed] = useState(false);\r\n\r\n  const totalBlocks = useMemo(() => getTotalBlocks(data), [data]);\r\n  const usedBlocksCount = useMemo(() => getUsedBlocksCount(currentQuizState), [currentQuizState]);\r\n\r\n  return (\r\n    <div className={styles.quiz_page}>\r\n      <ConfettiAnimation isRunning={confettiRunning} />\r\n      {data ? (\r\n        <>\r\n          <img src={PCImage} alt=\"PC horizontal line\" className={styles.image} />\r\n          <ContentContainer\r\n            data={data}\r\n            onBlockSelect={(block, category) => handleBlockSelect(\r\n              block, category, currentQuizState, setSelectedBlock, setSelectedCategory, setIsBlockUsed\r\n            )}\r\n            usedBlocks={currentQuizState.usedBlocks || {}}\r\n          />\r\n\r\n          {selectedBlock && (\r\n            <Modal\r\n              block={selectedBlock}\r\n              categoryName={selectedCategory?.name || 'Без категории'}\r\n              onClose={() => handleCloseModal(setSelectedBlock, setSelectedCategory, setIsBlockUsed)}\r\n              selectedMode={selectedMode}\r\n              onSelectCategory={(categoryId, blockId) => handleSelectCategory(\r\n                categoryId, blockId, currentQuizId, markBlockAsUsed, totalBlocks, usedBlocksCount, setConfettiRunning, setShowEndMessage, () => handleCloseModal(setSelectedBlock, setSelectedCategory, setIsBlockUsed)\r\n              )}\r\n              isBlockUsed={isBlockUsed}\r\n              onTryAgain={() => setIsBlockUsed(false)}\r\n              onContinue={() => handleCloseModal(setSelectedBlock, setSelectedCategory, setIsBlockUsed)}\r\n            />\r\n          )}\r\n        </>\r\n      ) : (\r\n        <div>No data available.</div>\r\n      )}\r\n\r\n      {showEndMessage && (\r\n        <EndMessage\r\n          onNewGame={() => handleNewGame(currentQuizId, setQuizStates, setConfettiRunning, setShowEndMessage)}\r\n          onMainMenu={() => handleMainMenu(currentQuizId, setQuizStates, setShowQuizPage, setConfettiRunning, true)}\r\n        />\r\n      )}\r\n\r\n      <MenuModal\r\n        showSettings={() => setIsSettingsVisible(true)}\r\n        showMainMenu={() => handleMainMenu(currentQuizId, setQuizStates, setShowQuizPage, setConfettiRunning, false)}\r\n        onNewGame={() => handleNewGame(currentQuizId, setQuizStates, setConfettiRunning, setShowEndMessage)}\r\n        isVisible={isMenuVisible}\r\n        closeMenuModal={() => setIsMenuVisible(false)}\r\n      />\r\n\r\n      {isSettingsVisible && <Settings onClose={() => setIsSettingsVisible(false)} />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default QuizPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}