{"ast":null,"code":"import React,{useState,useEffect}from'react';import StartTimerButton from'../StartTimerButton/StartTimerButton';import Timer from'../Timer/Timer';import SelectCategoryButton from'../SelectCategoryButton/SelectCategoryButton';import ShowAnswerButton from'../ShowAnswerButton/ShowAnswerButton';import styles from'./QAMode.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function QAMode(_ref){let{block,showAnswer,setTimerStarted,timerStarted,timerEnded,handleTimerEnd,handleShowAnswer,handleSelectCategory,handleForceStop}=_ref;const[forceStopped,setForceStopped]=useState(false);const[answerShown,setAnswerShown]=useState(false);// Локальное состояние для контроля отображения кнопок\nconst[localTimerStarted,setLocalTimerStarted]=useState(false);// Локальное состояние для контроля таймера\nuseEffect(()=>{// Сброс состояния при изменении блока или при открытии модального окна\nsetForceStopped(false);setAnswerShown(false);setLocalTimerStarted(false);},[block]);const handleForceStopInternal=()=>{handleForceStop();setForceStopped(true);};const handleShowAnswerInternal=()=>{handleShowAnswer();setAnswerShown(true);// Обновляем локальное состояние после показа ответа\n};const handleStartTimerInternal=()=>{setTimerStarted(true);setLocalTimerStarted(true);};if(!block){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.content,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.selectedInfo,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.infoCategoryName,children:block.categoryName||'No Category'}),/*#__PURE__*/_jsx(\"div\",{className:styles.selectedNumber,children:block.id+1})]}),/*#__PURE__*/_jsx(\"h2\",{children:showAnswer?block.answer:block.question}),showAnswer&&/*#__PURE__*/_jsx(\"p\",{className:styles.subAnswer,children:block.subAnswer}),/*#__PURE__*/_jsx(\"div\",{className:styles.controlBlock,children:!localTimerStarted?/*#__PURE__*/_jsx(StartTimerButton,{onClick:handleStartTimerInternal}):!timerEnded?/*#__PURE__*/_jsx(Timer,{duration:30,onEnd:handleTimerEnd,onForceStop:handleForceStopInternal,forceStopped:forceStopped}):!answerShown?/*#__PURE__*/_jsx(ShowAnswerButton,{onClick:handleShowAnswerInternal}):/*#__PURE__*/_jsx(SelectCategoryButton,{onClick:handleSelectCategory})})]});}export default QAMode;","map":{"version":3,"names":["React","useState","useEffect","StartTimerButton","Timer","SelectCategoryButton","ShowAnswerButton","styles","jsx","_jsx","jsxs","_jsxs","QAMode","_ref","block","showAnswer","setTimerStarted","timerStarted","timerEnded","handleTimerEnd","handleShowAnswer","handleSelectCategory","handleForceStop","forceStopped","setForceStopped","answerShown","setAnswerShown","localTimerStarted","setLocalTimerStarted","handleForceStopInternal","handleShowAnswerInternal","handleStartTimerInternal","children","className","content","selectedInfo","infoCategoryName","categoryName","selectedNumber","id","answer","question","subAnswer","controlBlock","onClick","duration","onEnd","onForceStop"],"sources":["E:/quiz-app-react/src/components/QAMode/QAMode.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport StartTimerButton from '../StartTimerButton/StartTimerButton';\r\nimport Timer from '../Timer/Timer';\r\nimport SelectCategoryButton from '../SelectCategoryButton/SelectCategoryButton';\r\nimport ShowAnswerButton from '../ShowAnswerButton/ShowAnswerButton';\r\nimport styles from './QAMode.module.css';\r\n\r\nfunction QAMode({\r\n  block,\r\n  showAnswer,\r\n  setTimerStarted,\r\n  timerStarted,\r\n  timerEnded,\r\n  handleTimerEnd,\r\n  handleShowAnswer,\r\n  handleSelectCategory,\r\n  handleForceStop,\r\n}) {\r\n  const [forceStopped, setForceStopped] = useState(false);\r\n  const [answerShown, setAnswerShown] = useState(false); // Локальное состояние для контроля отображения кнопок\r\n  const [localTimerStarted, setLocalTimerStarted] = useState(false); // Локальное состояние для контроля таймера\r\n\r\n  useEffect(() => {\r\n    // Сброс состояния при изменении блока или при открытии модального окна\r\n    setForceStopped(false);\r\n    setAnswerShown(false);\r\n    setLocalTimerStarted(false);\r\n  }, [block]);\r\n\r\n  const handleForceStopInternal = () => {\r\n    handleForceStop();\r\n    setForceStopped(true);\r\n  };\r\n\r\n  const handleShowAnswerInternal = () => {\r\n    handleShowAnswer();\r\n    setAnswerShown(true); // Обновляем локальное состояние после показа ответа\r\n  };\r\n\r\n  const handleStartTimerInternal = () => {\r\n    setTimerStarted(true);\r\n    setLocalTimerStarted(true);\r\n  };\r\n\r\n  if (!block) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.content}>\r\n      <div className={styles.selectedInfo}>\r\n        <span className={styles.infoCategoryName}>{block.categoryName || 'No Category'}</span>\r\n        <div className={styles.selectedNumber}>{block.id + 1}</div>\r\n      </div>\r\n      <h2>{showAnswer ? block.answer : block.question}</h2>\r\n      {showAnswer && <p className={styles.subAnswer}>{block.subAnswer}</p>}\r\n      <div className={styles.controlBlock}>\r\n        {!localTimerStarted ? (\r\n          <StartTimerButton onClick={handleStartTimerInternal} />\r\n        ) : !timerEnded ? (\r\n          <Timer duration={30} onEnd={handleTimerEnd} onForceStop={handleForceStopInternal} forceStopped={forceStopped} />\r\n        ) : !answerShown ? (\r\n          <ShowAnswerButton onClick={handleShowAnswerInternal} />\r\n        ) : (\r\n          <SelectCategoryButton onClick={handleSelectCategory} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default QAMode;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,gBAAgB,KAAM,sCAAsC,CACnE,MAAO,CAAAC,KAAK,KAAM,gBAAgB,CAClC,MAAO,CAAAC,oBAAoB,KAAM,8CAA8C,CAC/E,MAAO,CAAAC,gBAAgB,KAAM,sCAAsC,CACnE,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzC,QAAS,CAAAC,MAAMA,CAAAC,IAAA,CAUZ,IAVa,CACdC,KAAK,CACLC,UAAU,CACVC,eAAe,CACfC,YAAY,CACZC,UAAU,CACVC,cAAc,CACdC,gBAAgB,CAChBC,oBAAoB,CACpBC,eACF,CAAC,CAAAT,IAAA,CACC,KAAM,CAACU,YAAY,CAAEC,eAAe,CAAC,CAAGvB,QAAQ,CAAC,KAAK,CAAC,CACvD,KAAM,CAACwB,WAAW,CAAEC,cAAc,CAAC,CAAGzB,QAAQ,CAAC,KAAK,CAAC,CAAE;AACvD,KAAM,CAAC0B,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CAAE;AAEnEC,SAAS,CAAC,IAAM,CACd;AACAsB,eAAe,CAAC,KAAK,CAAC,CACtBE,cAAc,CAAC,KAAK,CAAC,CACrBE,oBAAoB,CAAC,KAAK,CAAC,CAC7B,CAAC,CAAE,CAACd,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAe,uBAAuB,CAAGA,CAAA,GAAM,CACpCP,eAAe,CAAC,CAAC,CACjBE,eAAe,CAAC,IAAI,CAAC,CACvB,CAAC,CAED,KAAM,CAAAM,wBAAwB,CAAGA,CAAA,GAAM,CACrCV,gBAAgB,CAAC,CAAC,CAClBM,cAAc,CAAC,IAAI,CAAC,CAAE;AACxB,CAAC,CAED,KAAM,CAAAK,wBAAwB,CAAGA,CAAA,GAAM,CACrCf,eAAe,CAAC,IAAI,CAAC,CACrBY,oBAAoB,CAAC,IAAI,CAAC,CAC5B,CAAC,CAED,GAAI,CAACd,KAAK,CAAE,CACV,mBAAOL,IAAA,QAAAuB,QAAA,CAAK,YAAU,CAAK,CAAC,CAC9B,CAEA,mBACErB,KAAA,QAAKsB,SAAS,CAAE1B,MAAM,CAAC2B,OAAQ,CAAAF,QAAA,eAC7BrB,KAAA,QAAKsB,SAAS,CAAE1B,MAAM,CAAC4B,YAAa,CAAAH,QAAA,eAClCvB,IAAA,SAAMwB,SAAS,CAAE1B,MAAM,CAAC6B,gBAAiB,CAAAJ,QAAA,CAAElB,KAAK,CAACuB,YAAY,EAAI,aAAa,CAAO,CAAC,cACtF5B,IAAA,QAAKwB,SAAS,CAAE1B,MAAM,CAAC+B,cAAe,CAAAN,QAAA,CAAElB,KAAK,CAACyB,EAAE,CAAG,CAAC,CAAM,CAAC,EACxD,CAAC,cACN9B,IAAA,OAAAuB,QAAA,CAAKjB,UAAU,CAAGD,KAAK,CAAC0B,MAAM,CAAG1B,KAAK,CAAC2B,QAAQ,CAAK,CAAC,CACpD1B,UAAU,eAAIN,IAAA,MAAGwB,SAAS,CAAE1B,MAAM,CAACmC,SAAU,CAAAV,QAAA,CAAElB,KAAK,CAAC4B,SAAS,CAAI,CAAC,cACpEjC,IAAA,QAAKwB,SAAS,CAAE1B,MAAM,CAACoC,YAAa,CAAAX,QAAA,CACjC,CAACL,iBAAiB,cACjBlB,IAAA,CAACN,gBAAgB,EAACyC,OAAO,CAAEb,wBAAyB,CAAE,CAAC,CACrD,CAACb,UAAU,cACbT,IAAA,CAACL,KAAK,EAACyC,QAAQ,CAAE,EAAG,CAACC,KAAK,CAAE3B,cAAe,CAAC4B,WAAW,CAAElB,uBAAwB,CAACN,YAAY,CAAEA,YAAa,CAAE,CAAC,CAC9G,CAACE,WAAW,cACdhB,IAAA,CAACH,gBAAgB,EAACsC,OAAO,CAAEd,wBAAyB,CAAE,CAAC,cAEvDrB,IAAA,CAACJ,oBAAoB,EAACuC,OAAO,CAAEvB,oBAAqB,CAAE,CACvD,CACE,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAT,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}